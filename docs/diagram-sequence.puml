@startuml SequenceBuilder
actor Inven as "Inven!RA"
participant API as "AnalyticsController"
participant Engine as "AnalyticsEngine"
participant Builder as "AnalyticsReport.Builder"


Inven -> API : POST /analytics { instanceId, analytics[] }
API -> Engine : requestAnalytics(instanceId, analytics[])
Engine -> Engine : aggregate/compute metrics
Engine -> Builder : new Builder().instanceId(...).generatedAt(...).metrics(...)
Builder --> Engine : Builder (fluent object)
Engine -> Builder : build()
Builder --> Engine : AnalyticsReport
Engine -> API : AnalyticsReport.toMap()
API -> Inven : HTTP 200 { report JSON }
@enduml